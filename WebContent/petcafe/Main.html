<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>어서오시개</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
	rel="stylesheet" />
<link href="css/styles.css" rel="stylesheet" />
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>
<style>
nav {
	height: 100px;
}

.button {
	margin: auto;
	display: block;
	padding: 10px;
	border: none;
	padding: 16px 32px;
	text-align: center;
	font-size: 16px;
	cursor: pointer;
	padding: 10px;
}

.cafelist {
	background-color: black;
	color: white;
	border: 2px solid #555555;
}

.cafelist:hover {
	background-color: #555555;
	color: white;
}
</style>
</head>
<body>
	<!-- Navigation-->
	<nav class="navbar navbar-expand-xxl bg-dark navbar-dark ">
		<div class="container-fluid">
			<a class="navbar-brand" href="#"> <img src="../image/로고사진.jpg"
				alt="Logo" style="width: 100px; align-content: center;"
				class="rounded-pill"> 어서오시개
			</a>

		</div>
		<div>
			<!-- 로그인시 로그아웃 버튼으로 변경(수정필요) -->
			<button type='button' class="button cafelist"
				onClick="location.href='../member/login.html'">로그인/회원가입</button>
			<!-- 로그인시 보여주는 버튼 (수정필요)-->
			<button type='button' class="button cafelist"
				onClick="location.href='Enroll.html'">카페등록하기</button>
		</div>
	</nav>

	<!-- Section-->
	<section>
		<!-- categorize -->
		<div class="btn-group btn-group-lg" style="padding: 5px">
			<button type="button" class="btn btn-primary">전체</button>
			<button type="button" class="btn btn-primary">실내</button>
			<button type="button" class="btn btn-primary">실외</button>
		</div>

		<!-- content -->
		<div class="w3-content w3-padding" style="max-width: 1564px">
			<div class="w3-row-padding">

				<!-- cafe -->
				<div class="w3-col l3 m6 w3-margin-bottom" style="background-color: blue">
					<div class="w3-display-container" style="background-color: yellow">
						<!-- Sale badge -->
						<div class="w3-display-topleft w3-black w3-padding">top1</div>
						<!-- image -->
						<img class="card-img-top" src="../image/개떼라떼.jpg" alt="cafe" style="width: 100%">
						<!-- details -->
						<div class="card-body p-4">
							<div class="text-center">
								<!-- cafe name -->
								<h5 class="fw-bolder">개떼라떼</h5>
								<!-- score -->
								<div
									class="d-flex justify-content-center small text-warning mb-2">
									<div class="bi-star-fill"></div>
									<div class="bi-star-fill"></div>
									<div class="bi-star-fill"></div>
									<div class="bi-star-fill"></div>
									<div class="bi-star-fill"></div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!--  카페이미지, 카페이름, 평점 -->
				<script>
					function makeCafeDiv(cafe) {
						let outDiv = document.createElement('div');
						outDiv.className = "w3-col l3 m6 w3-margin-bottom";
						
						let innerDiv = document.createElement('div');
						innerDiv.className = "w3-display-container";
						
						outDiv.appendChild(innerDiv); //부모-자식.
						
						// 배너
						let divBadge = document.createElement('div');
						divBadge.className = "w3-display-topleft w3-black w3-padding";
						divBadge.innerHTML = "TOP";

						// 카페이미지
						let img = document.createElement('img');
						img.className = "card-img-top";
						img.setAttribute('src', '../image/' + cafe.cafeImage);

						// 카페이름
						let itemDiv = document.createElement('div');
						itemDiv.className = "card-body p-4";
						let itemInner = document.createElement('div');
						itemInner.className = "text-center";

						let h5 = document.createElement('h5');
						h5.className = "fw-bolder";
						h5.innerHTML = cafe.cafeName;
						
						//평점
						let likeIt = document.createElement('div');
						likeIt.className = "d-flex justify-content-center small text-warning mb-2"
						let point = parseFloat(cafe.cafeScore);
						let digitValue = Math.floor(point);
						let halfValue = point - digitValue;
						//console.log(digitValue, halfValue)
						for (let i = 0; i < digitValue; i++) {
							let starDiv = document.createElement('div');
							starDiv.className = "bi-star-fill";
							likeIt.appendChild(starDiv);
						}
						if (halfValue) {
							let starDiv = document.createElement('div');
							starDiv.className = "bi-star-half";
							likeIt.appendChild(starDiv);
						}

						return outDiv;
					} //function
					
					let xhtp = new XMLHttpRequest();
					xhtp.open('get','../GetCafeList');
					xhtp.send();
					xhtp.onload = function(){
						let data = JSON.parse(xhtp.responseText)
						console.log()
						
						for (let datum of data) {
							let list = document.querySelector('section>div>div');
							list.appendChild(makeCafeDiv(datum));
							}
						} //xhtp.onload
				</script>

			</div>
		</div>
	</section>

	<!-- Footer -->
	<footer>
		<div>
			<button class="button cafelist" type='button'
				onClick="location.href='CafeList.html'">전체카페보기</button>
		</div>
	</footer>

</body>
</html>